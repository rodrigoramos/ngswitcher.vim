Describe When switching from html file to ts file
  Context if the ts file exists
    It switches to ts file
      execute 'e test/fixture/app.component.html'
      call ngswitcher#switch(function('ngswitcher#getTSPath'))
      Assert Equals(expand('%'), 'test/fixture/app.component.ts')
    End
  End
  After
    call ngswitcher#clearHistory()
  End
End

Describe ngswitcher#getAngularFilesInCurrentDirectory()
  It returns Angular files object (e.g. html/css/ts/spec.ts)
    execute 'e test/fixture/app.component.html'
    let files = ngswitcher#getAngularFilesInCurrentDirectory()
    Assert Equals(map(files, 'v:val.path'), [
    \ 'test/fixture/app.component.css',
    \ 'test/fixture/app.component.html',
    \ 'test/fixture/app.component.spec.ts',
    \ 'test/fixture/app.component.ts'
    \ ])
  End
End

Describe ngswitcher#getTSPath(currentFile, targetFiles, default)
  Before
    let factory = ngswitcher#core#getAngularFileFactory()
    let targetFiles = []
    call add(targetFiles, factory.create('./foo.component.html'))
    call add(targetFiles, factory.create('./foo.component.css'))
    call add(targetFiles, factory.create('./foo.component.ts'))
    call add(targetFiles, factory.create('./foo.component.spec.ts'))
  End

  Context the currentFile is not a ts file
    It returns a ts file path
      let notTS = factory.create('./foo.component.html')
      let nextPath = ngswitcher#getTSPath(notTS, targetFiles)
      Assert Equals(nextPath, './foo.component.ts')
    End
  End

  Context the currentFile is a ts file
    Context if a previous file does not exist
      It returns a default path (defalt: .html)
        let ts = factory.create('./foo.component.ts')
        let nextPath = ngswitcher#getTSPath(ts, targetFiles)
        Assert Equals(nextPath, './foo.component.html')
        let nextPath = ngswitcher#getTSPath(ts, targetFiles, '.css')
        Assert Equals(nextPath, './foo.component.css')
      End
    End
  End
End

